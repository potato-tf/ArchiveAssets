//Rotten Resurgence
//An Advanced mission for the map Boogge by botrot. https://steamcommunity.com/id/BotRot

//Wave 1: $6000
//Total Mission Money (including starting money): $10000

#base robot_standard.pop
#base robot_giant.pop
#base robot_custom_weapons.pop

WaveSchedule
{
    //Initial Money  $4000
    StartingCurrency 4000
	CanBotsAttackWhileInSpawnRoom No
	RespawnWaveTime 4
	Advanced 1
	FixedRespawnWaveTime Yes
	EventPopfile Halloween
    //Sigsegv mod-exclusive
	MedigunShieldDamage 1 [$SIGSEGV] //Shield Medics can now harm human team
    ItemAttributes [$SIGSEGV] //Adds attributes to specified item given to players
	{
		ItemName "The Gas Passer"
		"attach particle effect" 12 //Massed Flies Unusual effect
	}
    //Custom Bot Templates
	Templates
	{
        //Offense Classes
        T_TFBot_Scout_Soda
        {
			Name	"Soda Popper Scout"
			Class	Scout
			Skill	Hard
			MaxVisionRange 750
			Item    "the soda popper"
            Item    "The Bottle Cap"
            ItemAttributes
			{
				ItemName	"The Bottle Cap"
				"item style override" 1
			}
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
        }
        T_TFBot_Soldier_Burst //Blast Soldier but without the knockback effect
        {
            Class Soldier
			Skill Expert
			WeaponRestrictions PrimaryOnly		
			Item "The Liberty Launcher"
            Item "Jumper's Jeepcap"
            Item "the mantreads"
			Name "Burst Fire Soldier"
			Attributes HoldFireUntilFullReload
			ItemAttributes
			{
				ItemName "The Liberty Launcher"
				"fire rate bonus" 0.001
				"faster reload rate" 1.5
                "blast radius decreased" 1.2
				"projectile spread angle penalty" 2
			}
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
        }
        T_TFBot_Giant_Soldier_Burst_Pocket
		{
			Class Soldier
			Name "Giant Burst Pocket Soldier"
			Health 4200
			Skill Expert
			WeaponRestrictions PrimaryOnly
			Attributes MiniBoss
			Attributes HoldFireUntilFullReload
            Attributes AlwaysCrit
            ClassIcon soldier_giant
            Item "Steel Shako"
			ItemAttributes
			{
				ItemName "TF_WEAPON_ROCKETLAUNCHER"
                "mod medic healed damage bonus" 2
				"reload time decreased while healed" 0.5
				"fire rate bonus" 0.2
				"clip size upgrade atomic" 5.0
                "killstreak tier" 1
			}
			CharacterAttributes
			{
                "damage bonus" 2.0
                "faster reload rate" 0.4
				"move speed bonus"	0.5
				"damage force reduction" 0.4
				"airblast vulnerability multiplier" 0.4
				"override footstep sound set" 3
			}
		}
        T_TFBot_Pyro_Gas
		{
			Name "Gaseous Fury Pyro"
			Class Pyro
			Skill Hard
			Item "the dragon's fury"
			Item "the gas passer"
            Item "melted mop"
			Attributes AlwaysFireWeapon
			WeaponRestrictions SecondaryOnly
			ItemAttributes
			{
				ItemName	"the gas passer"
				"item_meter_charge_rate" 5
				"weapon burn dmg increased" 2
			}
			CharacterAttributes
			{
				"deploy time increased" 0
                "kill forces attacker to laugh"	1
			}
		}
        T_TFBot_Pyro_Conch
        {
            Name "Conch Airblast Pyro"
            Class Pyro
            Skill Expert
            Attributes AlwaysCrit
            Attributes SpawnWithFullCharge
            Item "Traffic Cone"
            Item "the degreaser"
            Item "the concheror"
            ItemAttributes
            {
                ItemName "the degreaser"
                "airblast pushback scale" 2.5
                "mult airblast refire time" 0.25
            }
            ItemAttributes
			{
				ItemName	"the concheror"
				"deploy time increased"	0.5
			}
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
                "increase buff duration"	9.0
            }
        }
        T_TFBot_Giant_Pyro_Fury
        {
            UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
            ClassIcon pyro_giant
            Name "Giant Dragon's Fury Pyro"
            Health  3000
            Class Pyro
            Skill Expert
            MaxVisionRange	1000
            Attributes AlwaysCrit
            Item "the dragon's fury"
            Item "Burny's Boney Bonnet"
            Item "The Cauterizer's Caudal Appendage"
            Item "The Monster's Stompers"
            WeaponRestrictions PrimaryOnly
            Attributes  MiniBoss
            CharacterAttributes
            {
                "move speed bonus"	0.5
                "damage force reduction" 0.6
                "airblast vulnerability multiplier" 0.6
                "override footstep sound set" 6
            }
        }
        T_TFBot_Chief_Pyro_Rotten //Final Boss
        {
            UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
            UseBestWeapon 1 [$SIGSEGV] //Switches to Spellbook when ready and Shotgun when enemies are far away
            ClassIcon spellbook_lite
            Name "Klutzy Comet"
            Health  20000
            Class Pyro
            Skill Expert
            Scale 1.9
            Item "the dragon's fury"
            Item "TF_WEAPON_SPELLBOOK"
            Item "The Homewrecker" //in case bot accidentally switches to melee for some reason
            Item "The Person in the Iron Mask"	
            Attributes AlwaysCrit
            Attributes  MiniBoss
            Attributes  UseBossHealthBar
            ItemAttributes
            {
                ItemName "the dragon's fury"
                "killstreak tier" 1
                "item_meter_charge_rate" 0.6
                "speed_boost_on_hit" 3
            }
            ItemAttributes
            {
                ItemName  "TF_WEAPON_SHOTGUN_PYRO"
                "Set DamageType Ignite" 1
                "killstreak tier" 1
                "override projectile type"  6 // Fires flares instead of bullets
                "clip size bonus" 3
                "damage bonus"   6 //deals same damage as regular flares
                "fire rate bonus"       0.05
                "projectile spread angle penalty"	3
                "auto fires full clip"  1
                "auto fires when full"  1
                "faster reload rate" 0.1
            }
            //Sigsegv mod-exclusive
            Spell [$SIGSEGV]
            {
                Type "Fireball"
                Delay 5 //Will not cast this spell in the first 5 seconds
                Cooldown 5 //Casts this spell every 5 seconds
            }
            Spell [$SIGSEGV]
            {
                Type "Meteor Shower"
                Delay 20 //Will not cast this spell in the first 20 seconds
                Cooldown 20 //Casts this spell every 20 seconds
                Repeats 6 //Can only cast this spell a maximum of 6 times for its entire lifetime
            }
            CharacterAttributes
            {
                "weapon burn dmg increased" 3
                "hand scale" 1.25
                "gesture speed increase" 2
                "move speed bonus"	0.5
                "damage force reduction" 0
                "airblast vulnerability multiplier" 0
                "airblast vertical vulnerability multiplier" 0
				"rage giving scale"	0.1
                "override footstep sound set" 6
                "cancel falling damage" 1
                "deploy time increased" 0
            }
        }
        //Defense Classes
        T_TFBot_Demoknight_Persian //based on Persian Demoknight from Rottenburg advanced missions
		{
			Name	"Persian Demoknight"
			Health  200
			Class	Demoman
			Skill	Hard
			WeaponRestrictions	MeleeOnly
			Item	"ali baba's wee booties"
			Item	"the splendid screen"
			Item	"the persian persuader"
			Item    "sultan's ceremonial"
            ItemAttributes
			{
				ItemName "ali baba's wee booties"
				"max health additive bonus" 0
			}
			ItemAttributes
			{
				ItemName	"the splendid screen"
				"attack not cancel charge"	1
			}
			ItemAttributes
			{
				ItemName "the persian persuader"
				"critboost on kill" 8 //compensates for ~5 seconds of Schadenfreude
			}
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
		}
        T_TFBot_Demoknight_Charge
        {
            Name	"Demoknight Charger"
			Health  200
			Class	Demoman
			Skill	Expert
			WeaponRestrictions	MeleeOnly
			Item	"ali baba's wee booties"
			Item	"the splendid screen"
			Item	"the claidheamohmor"
            Item	"the dark age defender"
			Item    "the glasgow great helm"
            ItemAttributes
			{
				ItemName "ali baba's wee booties"
				"max health additive bonus" 0
			}
			ItemAttributes
			{
				ItemName	"the splendid screen"
				"attack not cancel charge"	1
			}
            ItemAttributes
			{
				ItemName	"the claidheamohmor"
				"charge time increased"	1
                "kill refills meter" 1
			}
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
        }
        T_TFBot_Giant_Demoman_Quad //based from Chief Crit-on-Kill Cyclops from Clanker Carnage, a Barren mission by me
        {
            //Sigsegv-mod exclusive; this bot will lead grenades and aim at enemy's feet for increased accuracy
            AimLeadProjectileSpeed 1216.6 [$SIGSEGV]
            AimAt Feet [$SIGSEGV]
            ClassIcon demo_giant
            Class Demoman
			Name "Giant Crit-on-Kill Demoman"
			Skill Expert
			Health 3300
			Item "the bolted bombardier"
			Item "the bolted bicorne"
			Item "the hurt locher"
			Item "the iron bomber"
			WeaponRestrictions PrimaryOnly
			Attributes MiniBoss
			Attributes HoldFireUntilFullReload
			ItemAttributes
			{
				ItemName "the iron bomber"
				"projectile spread angle penalty" 2
				"fire rate bonus" 0
				"faster reload rate" 0.1
				"critboost on kill" 5
                "killstreak tier" 1
			}
			CharacterAttributes
			{
				"move speed bonus"	0.5
				"damage force reduction" 0
				"airblast vulnerability multiplier" 0
				"override footstep sound set" 4
				"airblast vertical vulnerability multiplier" 0
				"rage giving scale" 0.1
			}
        }
        T_TFBot_Giant_Demoman_Void
        {
            //Sigsegv-mod exclusive; this bot will lead grenades and aim at enemy's feet for increased accuracy
            AimLeadProjectileSpeed 1825 [$SIGSEGV]
            AimAt Feet [$SIGSEGV]
            Name	"Abyssal Dynamo"
            Health  3300
			Class	Demoman
			Skill	Normal
			MaxVisionRange 2000
            Attributes  MiniBoss
            Attributes  DisableDodge
            Item    "nasty norsemann"
            Item    "the loch-n-load"
            Item    "the ullapool caber"
            ItemAttributes
			{
				ItemName	"the loch-n-load"
                "projectile speed increased" 1.5
				"projectile spread angle penalty" 2
				"fire rate bonus" 0.001
				"faster reload rate" 0.1
                "silent killer" 1
			}
            ItemAttributes
			{
				ItemName	"the ullapool caber"
				"damage bonus" 10
                "move speed bonus"	2
                "blast dmg to self increased" 999
                "silent killer" 1
                "single wep deploy time increased" 1
			}
            ItemAttributes
			{
				ItemName	"nasty norsemann"
				"attach particle effect" 47 //Stormy 13th Hour Unusual effect
			}
            CharacterAttributes
			{
				"move speed bonus"	0.5
				"damage force reduction" 0.5
				"airblast vulnerability multiplier" 0.5
				"override footstep sound set" 4
                "deploy time increased"	0
                "voice pitch scale" 0.25
                "cancel falling damage" 1
			}
        }
        T_TFBot_Heavy_BlackMarket
        {
            Class Heavyweapons
			Skill Hard
            Health 900
			Scale 1.5
			Name  "Black Market Heavy"
			Item  "tomislav"
			Item  "the buffalo steak sandvich"
			Item  "the eviction notice"
			Item    "capone's capper"
			ItemAttributes
			{
				ItemName "the buffalo steak sandvich"
				"force weapon switch" 1
				"single wep holster time increased" 0.1
			}
			ItemAttributes
			{
				ItemName "the eviction notice"
				"mod_maxhealth_drain_rate" 0
                "minicrits become crits" 1
			}
			CharacterAttributes
			{
                "deploy time increased" 0.5
                "kill forces attacker to laugh"	1
			}
        }
        T_TFBot_Giant_Heavyweapons_Haste
        {
            UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
            Health	5000
			Name	"Giant Haste Heavy"
			Class	HeavyWeapons
			Skill	Expert
			MaxVisionRange	1200
			WeaponRestrictions	PrimaryOnly
			Attributes	MiniBoss
            ClassIcon heavy_giant
            Item   "The Bunsen Brave"
			ItemAttributes
			{
				ItemName	"TF_WEAPON_MINIGUN"
				"fire rate bonus" 0.55
                "speed_boost_on_hit" 3
                "fire rate bonus with reduced health" 0.65
			}
			CharacterAttributes
			{
				"move speed bonus"	0.7
				"damage force reduction"	0.3
				"airblast vulnerability multiplier"	0.3
				"override footstep sound set"	6
			}
        }
        T_TFBot_Chief_Heavy_Rotten //Final Boss
        {
            UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
            ClassIcon heavy_deflector
            Name "Grand Grotesque"
            Health  40000
            Class Heavyweapons
            Skill Expert
            Scale 1.9
            Attributes AlwaysFireWeapon
            Item "The Huo Long Heatmaker"
            Item "the buffalo steak sandvich"
            Item "The Killing Gloves of Boxing"
            Item "The Chicken Kiev"
            Item "The Magical Mercenary"
            Attributes  MiniBoss
            Attributes  UseBossHealthBar
            ItemAttributes
            {
                ItemName "The Huo Long Heatmaker"
                "attack projectiles" 2
				"damage penalty" 1
                "dmg pierces resists absorbs" 1
                "damage bonus vs burning"	1.75
                "weapon burn dmg increased" 5
                "killstreak tier" 1
            }
            ItemAttributes
            {
                ItemName "the buffalo steak sandvich"
                "force weapon switch" 1
				"single wep holster time increased" 0.1
                "provide on active" 1
                "dmg taken increased" 0 //invincible while eating sandvich
            }
            ItemAttributes 
            {
				ItemName "The Killing Gloves of Boxing"
                "killstreak tier" 1
                "melee range multiplier" 1.7
                "provide on active" 1
                "dmg bonus while half dead" 1.5
                "dmg taken increased" 0.8 //negates buffalo nerf
			}
            CharacterAttributes
            {
                "gesture speed increase"	2
                "hand scale" 1.25
                "move speed bonus"	0.5
                "damage force reduction" 0
                "airblast vulnerability multiplier" 0
                "airblast vertical vulnerability multiplier" 0
				"rage giving scale"	0.1
                "override footstep sound set" 2
            }
        }
        //Support Classes
        T_TFBot_Medic_Shield
        {
            Class Medic
			Name "Shield Medic"
			Skill Expert
			ClassIcon medic_shield
			WeaponRestrictions SecondaryOnly
			Attributes SpawnWithFullCharge
			Attributes IgnoreEnemies
			Attributes ProjectileShield
			Item  "the bot dogger"
			ItemAttributes
			{
				ItemName tf_weapon_medigun
				"ubercharge rate bonus" 0.01
				"generate rage on heal" 3
				"increase buff duration" 2
			}
			CharacterAttributes
			{
				"bot medic uber deploy delay duration" 9999
				"heal rate bonus" 2		
				"overheal penalty" 0
			}
        }
        T_TFBot_Sniper_Bow_II
        {
            Class Sniper
            Name "Penetrating Bowman"
            Skill Hard
            ClassIcon sniper_bow
            WeaponRestrictions PrimaryOnly
            Attributes AlwaysCrit
            Item "the huntsman"
            Item "the cozy camper"
            Item "the fruit shoot"
            ItemAttributes
            {
                ItemName "The Huntsman"
                "projectile penetration" 1
            }
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
        }
        T_TFBot_Giant_Sniper_Void
        {
            Name	"Abyssal Assassin"
            Health  3000
			Class	Sniper
			Skill	Expert
			MaxVisionRange 3000
            Attributes  MiniBoss
            Attributes  DisableDodge
			Item	"the hitman's heatmaker"
			Item	"the cozy camper"
			Item    "nasty norsemann"
			Item    "the shahanshah"
			ItemAttributes
			{
				ItemName	"the hitman's heatmaker"
				"sniper fires tracer HIDDEN" 1
				"lunchbox adds minicrits" 3
				"damage penalty on bodyshot" 1
				"sniper charge per sec" 2
				"silent killer" 1
			}
            ItemAttributes
			{
				ItemName	"the cozy camper"
				"health regen" 40
			}
            ItemAttributes
			{
				ItemName	"the shahanshah"
				"dmg bonus while half dead" 2
				"dmg penalty while half alive" 0.5
                "silent killer" 1
                "move speed bonus" 2
			}
            ItemAttributes
			{
				ItemName	"nasty norsemann"
				"attach particle effect" 47 //Stormy 13th Hour Unusual effect
			}
            CharacterAttributes
			{
				"move speed bonus" 0.5
				"damage force reduction" 0.6
				"airblast vulnerability multiplier" 0.6
				"rage giving scale"	0.1
				"override footstep sound set" 7
                "head scale" 0.7
                "voice pitch scale" 0.25
                "cancel falling damage" 1
			}
        }
        T_TFBot_Spy_Honor
		{
			ClassIcon spy
			Name	"Spy of Dishonor"
			Class	Spy
			Skill	Expert
			Item	"the enforcer"
			Item	"the big earner"
			Item	"cosa nostra cap"
			Item	"the made man"
            CharacterAttributes
            {
                "kill forces attacker to laugh"	1
            }
		}
        T_TFBot_Giant_Spy_Void  //removed because if even one of these is left alive, regular Spy announcements do not trigger until all Void Spies are destroyed
        {
            Name	"Abyssal Dr. Enforcicle"
            Health  3000
			Class	Spy
			Skill	Expert
			MaxVisionRange 2000
            Attributes  MiniBoss
            Attributes  AlwaysCrit
            Attributes  DisableDodge
			Item	"the enforcer"
			Item    "nasty norsemann"
			Item    "the spy-cicle"
            Item    "the dead ringer"
			ItemAttributes
			{
				ItemName	"the enforcer"
				"silent killer" 1
			}
            ItemAttributes
			{
				ItemName	"the spy-cicle"
				"crit forces victim to laugh" 1
                "silent killer" 1
                "melts in fire" 5
			}
            ItemAttributes
			{
				ItemName	"nasty norsemann"
				"attach particle effect" 47 //Stormy 13th Hour Unusual effect
			}
            CharacterAttributes
			{
                "cannot disguise" 1
				"move speed bonus" 0.5
				"damage force reduction" 0.6
				"airblast vulnerability multiplier" 0.6
				"rage giving scale"	0.1
				"override footstep sound set" 7
                "head scale" 0.7
                "voice pitch scale" 0.25
                "cancel falling damage" 1
			}
        }
    }
    //Support Robot Missions
	Mission
	{
		Objective	DestroySentries
		Where	spawnbot_invasion
		InitialCooldown	60
		CooldownTime	60
		DesiredCount	1
		TFBot
		{
			Class Scout //Scout Busters are faster than regular Sentry Busters
			Name "Bleed Buster"
			Skill Expert
			Health 2500
			ClassIcon sentry_buster
			Attributes MiniBoss
			Attributes	DisableDodge
			WeaponRestrictions MeleeOnly
			Item  "the wrap assassin"
			Item "The Wing Mann"	
			ItemAttributes
            {
                ItemName  "the wrap assassin"
                "effect bar recharge rate increased"    0.1
            }
            CharacterAttributes
			{
				"head scale" 3
				"torso scale"	0
				"damage force reduction" 0.1
				"airblast vulnerability multiplier" 0.1
                "airblast vertical vulnerability multiplier" 0.1
                "move speed bonus" 2
                "cannot be backstabbed" 1
			}
		}
	}
    Mission
	{
		Objective	Sniper
		Where spawnbot_void1
        Where spawnbot_void2
        Where spawnbot_void3
        Where spawnbot_void4
		BeginAtWave	1
		RunForThisManyWaves	1
		InitialCooldown	60
		CooldownTime	90
		DesiredCount	2
		RandomChoice
		{
			TFBot
            {
                Template T_TFBot_Giant_Demoman_Void
            }
            TFBot
            {
                Template T_TFBot_Giant_Sniper_Void
            }
		}
    }
    Mission 
    {
        Objective Spy
        Where spawnbot_mission_spy
        BeginAtWave 1
        RunForThisManyWaves 1
        InitialCooldown 120
        CooldownTime 120
        DesiredCount 2
        TFBot
        {
            Template T_TFBot_Spy_Honor
        }
    }
    Wave
	{
		StartWaveOutput
		{
			Target	wave_start_relay_ironman
			Action	Trigger
		}
		DoneOutput
		{
			Target	wave_finished_relay
			Action	Trigger
		}
        Explanation [$SIGSEGV] //Sigsegv mod-exclusive; displays a message before a wave starts
		{
			Line "{green}////////////////////"
			Line "{yellow}NOTICE"
            Line "{blue}Medic Robots have enhanced Projectile Shields that can deal damage on contact!"
			Line "{green}////////////////////"
		}
        //"Wave 1"
        WaveSpawn
        {
            Name	wave1a
            TotalCurrency	100
            TotalCount	1
            MaxActive	1
            SpawnCount	1
            Tank
			{
				Health 30000
				Name tankboss
				Speed 75
				StartingPathTrackNode tank_path_1
				OnKilledOutput
				{
					Target boss_dead_relay
					Action Trigger
				}
				OnBombDroppedOutput
				{
					Target boss_deploy_relay
					Action Trigger
				}
			}
        }
        WaveSpawn
        {
            Name	wave1a
            TotalCurrency	50
            TotalCount	3
            MaxActive	1
            SpawnCount	1
            WaitBeforeStarting	5
            Where	spawnbot_side
            TFBot
			{
                UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
				Template	T_TFBot_Giant_Pyro
                Item  "Blazing Bull"
                Item  "Fallen Angel"
                Item  "Tail From the Crypt"
				Attributes  AlwaysCrit
				ItemAttributes
				{
					ItemName "TF_WEAPON_FLAMETHROWER"
					"lunchbox adds minicrits" 2
				}
			}
        }
        WaveSpawn
        {
            Name	wave1a
            TotalCurrency	50
            TotalCount	3
            MaxActive	1
            SpawnCount	1
            WaitBeforeStarting	5
            Where	spawnbot_flank
            TFBot
			{
                UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
				Template	T_TFBot_Giant_Pyro
                Item  "Blazing Bull"
                Item  "Fallen Angel"
                Item  "Tail From the Crypt"
				Attributes  AlwaysCrit
				ItemAttributes
				{
					ItemName "TF_WEAPON_FLAMETHROWER"
					"lunchbox adds minicrits" 2
				}
			}
        }
        WaveSpawn
        {
            Name	wave1a
            TotalCurrency	100
            TotalCount	35
            MaxActive	10
            SpawnCount	1
            WaitBeforeStarting	5
            WaitBetweenSpawns   0.5
            Where	spawnbot_invasion
            TFBot
			{
				Template	T_TFBot_Demoknight_Persian
			}
        }
        WaveSpawn
        {
            Name	wave1b
            WaitForAllDead wave1a
            TotalCurrency	100
            TotalCount	24
            MaxActive	12
            SpawnCount	1
            Where	spawnbot
            WaitBeforeStarting 5
            WaitBetweenSpawns  0.5
            TFBot
			{
				Template	T_TFBot_Soldier_Extended_Battalion
                ClassIcon soldier
				Health   220
				Item    "the black box"
                Item    "The Grenadier's Softcap"
                ItemAttributes
				{
					ItemName "the battalion's backup"
					"max health additive bonus" 0
				}
                CharacterAttributes
                {
                    "deploy time increased" 0.5
                    "kill forces attacker to laugh"	1
                }
			}
        }
        WaveSpawn
        {
            Name	wave1b
            WaitForAllDead wave1a
            TotalCurrency	100
            TotalCount	15
            MaxActive	6
            SpawnCount	3
            Where	spawnbot_side
            Where   spawnbot_flank
            WaitBeforeStarting 5
            WaitBetweenSpawns  3
            TFBot
			{
				Template	T_TFBot_Heavy_BlackMarket
			}
        }
        WaveSpawn
        {
            Name	wave1b
            WaitForAllDead wave1a
            TotalCurrency	100
            TotalCount	3
            MaxActive	2
            SpawnCount	1
            Where	spawnbot
            WaitBeforeStarting 15
            WaitBetweenSpawns  11
            TFBot
			{
				Template	T_TFBot_Giant_Scout
                Item        "the shortstop"
                Item        "Head Hunter"
                Item        "Claws And Infect"
                Item        "Crazy Legs"
			}
        }
        WaveSpawn
        {
            Name	wave1c
            WaitForAllDead wave1b
            TotalCurrency	200
            TotalCount	10
            MaxActive	6
            SpawnCount	2
            Where	spawnbot
            WaitBeforeStarting 5
            WaitBetweenSpawns  4
            Squad
			{
                FormationSize 100
                TFBot
                {
                    //Sigsegv-mod exclusive; this bot will lead grenades and aim at enemy's feet for increased accuracy
                    AimLeadProjectileSpeed 1216.6 [$SIGSEGV]
                    AimAt Feet [$SIGSEGV] 
                    Template	T_TFBot_Giant_Demoman
                    Item        "The Squid's Lid"
                    Item        "Cap'n Calamari"
                    ItemAttributes
                    {
                        ItemName "TF_WEAPON_GRENADELAUNCHER"
				        "fire rate bonus" 0.5
                    }
                }
				TFBot
                {
                    Template    T_TFBot_Medic_Shield
                }
			}
        }
        WaveSpawn
        {
            Name	wave1c
            WaitForAllDead wave1b
            TotalCurrency	100
            TotalCount	44
            MaxActive	12
            SpawnCount	6
            Where	spawnbot
            Where   spawnbot_side
            WaitBeforeStarting 5
            WaitBetweenSpawns  3
            TFBot
            {
                Template  T_TFBot_Sniper_Bow_II
            }
        }
        WaveSpawn
        {
            Name	wave1c2
            WaitForAllSpawned wave1c
            TotalCurrency	100
            TotalCount	4
            MaxActive	4
            SpawnCount	4
            Where	spawnbot
            WaitBeforeStarting 5
            TFBot
            {
                //Sigsegv-mod exclusive; this bot will lead grenades and aim at enemy's feet for increased accuracy
				AimLeadProjectileSpeed 1216.6 [$SIGSEGV]
                AimAt Feet [$SIGSEGV] 
                Template	T_TFBot_Giant_Demoman
                Item        "the chargin' targe"
                Item        "The Squid's Lid"
                Item        "Cap'n Calamari"
                ItemAttributes
                {
                    ItemName "TF_WEAPON_GRENADELAUNCHER"
				    "fire rate bonus" 0.5
                }
            }
        }
        WaveSpawn
        {
            Name	wave1d
            WaitForAllDead wave1c2
            TotalCurrency	100
            TotalCount	50
            MaxActive	7
            SpawnCount	5
            Where	spawnbot
            WaitBeforeStarting 5
            WaitBetweenSpawns  4
            TFBot
            {
                Template T_TFBot_Soldier_Burst
            }
        }
        WaveSpawn
        {
            Name	wave1d
            WaitForAllDead wave1c2
            TotalCurrency	100
            TotalCount	50
            MaxActive	7
            SpawnCount	5
            Where	spawnbot_side
            Where   spawnbot_flank
            WaitBeforeStarting 5
            WaitBetweenSpawns  2
            TFBot
            {
                Template T_TFBot_Scout_Soda
            }
        }
        WaveSpawn
        {
            Name	wave1d
            WaitForAllDead wave1c2
            TotalCurrency	100
            TotalCount	12
            MaxActive	6
            SpawnCount	3
            Where	spawnbot
            WaitBeforeStarting 7
            WaitBetweenSpawns  30
            Squad
            {
                FormationSize 200
                TFBot
                {
                    UseMeleeThreatPrioritization 1 [$SIGSEGV] //Sigsegv-mod exclusive; will prioritize closest target
                    Template T_TFBot_Giant_Heavyweapons
                    Item "Minsk Beef"
                    Item "Bull Locks"
                    Item "Bone-Cut Belt"
                }
                TFBot
                {
                    ClassIcon soldier_giant
                    Template T_TFBot_Giant_Soldier_Extended_Buff_Banner
                    Item  "Supernatural Stalker"
                    Item  "Hellhunter's Headpiece"
                    Item  "Ghoul Gibbin' Gear"
                    CharacterAttributes
                    {
                        "deploy time increased" 0.5
                    }
                }
                TFBot
                {
                    ClassIcon soldier_giant
                    Template T_TFBot_Giant_Soldier_Extended_Buff_Banner
                    Item  "Supernatural Stalker"
                    Item  "Hellhunter's Headpiece"
                    Item  "Ghoul Gibbin' Gear"
                    CharacterAttributes
                    {
                        "deploy time increased" 0.5
                    }
                }
            }
        }
        WaveSpawn
        {
            Name	wave1e
            WaitForAllDead wave1d
            TotalCurrency	300
            TotalCount	6
            MaxActive	3
            SpawnCount	3
            Where	spawnbot
            WaitBetweenSpawns 30
            Squad
            {
                TFBot
                {
                    Template T_TFBot_Giant_Pyro_Fury
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic_Regen
                    Name "Giant Regen Medic"
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic_Regen
                    Name "Giant Regen Medic"
                }
            }
        }
        WaveSpawn
        {
            Name	wave1e
            WaitForAllDead wave1d
            TotalCurrency	100
            TotalCount	50
            MaxActive	15
            SpawnCount	5
            Where	spawnbot_invasion
            WaitBetweenSpawns 2
            TFBot
            {
                ClassIcon scout
                Template T_TFBot_Scout_Sandman_FastCharge
                Attributes AlwaysCrit
                CharacterAttributes
                {
                    "kill forces attacker to laugh"	1
                }
            }
        }
        //"Wave 2"
        WaveSpawn
        {
            Name	wave2a
            WaitForAllDead wave1e
            TotalCurrency	200
            TotalCount	42
            MaxActive	6
            SpawnCount	3
            Where	spawnbot
            WaitBeforeStarting 8
            WaitBetweenSpawns  3
            TFBot
            {
                Skill Hard
                Template T_TFBot_Demoman
                Attributes AlwaysCrit
                Attributes HoldFireUntilFullReload
                Item "The Galvanized Gibus"
                Item  "the chargin' targe"
                CharacterAttributes
                {
                    "kill forces attacker to laugh"	1
                }
            }
        }
        WaveSpawn
        {
            Name	wave2a
            WaitForAllDead wave1e
            TotalCurrency	200
            TotalCount	60
            MaxActive	10
            SpawnCount	4
            Where	spawnbot
            Where   spawnbot_flank
            WaitBeforeStarting 8
            WaitBetweenSpawns  3
            RandomChoice
            {
                TFBot
                {
                    Template T_TFBot_Demoknight_Charge
                }
                TFBot
                {
                    Template T_TFBot_Demoknight_Persian
                    Tag bot_flank
                }
            }
        }
        WaveSpawn //Void Tank
		{
			Name  wave2a
            WaitForAllDead wave1e
			TotalCount 1
            MaxActive  1
			SpawnCount 1
			WaitBeforeStarting 17
			TotalCurrency 300
			Tank
			{
				Health 35000
				Name tankboss_underworld
				Speed 75
				StartingPathTrackNode tank_path_bridge1
				OnKilledOutput
				{
					Target boss_dead_relay_underworld
					Action Trigger
				}
				OnBombDroppedOutput
				{
					Target boss_deploy_relay
					Action Trigger
				}
			}
		}
        WaveSpawn
        {
            Name	wave2b
            WaitForAllDead wave2a
            TotalCurrency	200
            TotalCount	40
            MaxActive	9
            SpawnCount	1
            Where	spawnbot_invasion
            WaitBeforeStarting 5
            WaitBetweenSpawns  0.5
            RandomChoice
            {
                TFBot
                {
                    Class Pyro
                    Skill Hard
                    Attributes AlwaysCrit
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Class Pyro
                    Skill Hard
                    Attributes AlwaysCrit
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Template T_TFBot_Pyro_Gas
                    Tag bot_flank
                }
            }
        }
        WaveSpawn
        {
            Name	wave2b
            WaitForAllDead wave2a
            TotalCurrency	200
            TotalCount	28
            MaxActive	8
            SpawnCount	4
            Where	spawnbot
            WaitBeforeStarting 5
            WaitBetweenSpawns  5
            Squad
			{
                FormationSize 100
                TFBot
                {
                    Name "Heavy"
                    Class Heavyweapons
                    Skill Normal
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
				TFBot
                {
                    Template    T_TFBot_Medic_Shield
                }
                TFBot
                {
                    Name "Heavy"
                    Class Heavyweapons
                    Skill Normal
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Name "Heavy"
                    Class Heavyweapons
                    Skill Normal
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
			}
        }
        WaveSpawn
        {
            Name	wave2b2
            WaitForAllSpawned wave2b
            TotalCurrency	50
            TotalCount	1
            MaxActive	1
            SpawnCount	1
            Where   spawnbot_flank
            TFBot
            {
                ClassIcon soldier_giant
                Template T_TFBot_Giant_Soldier_Spammer_Reload
                Name "Giant Burst Stun Soldier"
                Health 4200
                Tag bot_flank
                Item "idiot box"
                Item "steel pipes"
				Item "shoestring budget"
                ItemAttributes
                {
                    ItemName "TF_WEAPON_ROCKETLAUNCHER"
                    "faster reload rate" 0.4
					"rocket specialist" 4
                }
                CharacterAttributes
                {
                    "move speed bonus"	0.5
                }
            }
        }
        WaveSpawn
        {
            Name	wave2b2
            WaitForAllSpawned wave2b
            TotalCurrency	50
            TotalCount	1
            MaxActive	1
            SpawnCount	1
            Where   spawnbot_side
            TFBot
            {
                ClassIcon soldier_giant
                Template T_TFBot_Giant_Soldier_Spammer_Reload
                Name "Giant Burst Stun Soldier"
                Health 4200
                Item "idiot box"
                Item "steel pipes"
				Item "shoestring budget"
                ItemAttributes
                {
                    ItemName "TF_WEAPON_ROCKETLAUNCHER"
                    "faster reload rate" 0.4
					"rocket specialist" 4
                }
                CharacterAttributes
                {
                    "move speed bonus"	0.5
                }
            }
        }
        WaveSpawn
        {
            Name	wave2c
            WaitForAllDead wave2b
            TotalCurrency	300
            TotalCount	16
            MaxActive	8
            SpawnCount	2
            Where	spawnbot_invasion
            WaitBeforeStarting 5
            WaitBetweenSpawns  3
            Squad
			{
				TFBot
                {
                    ClassIcon soldier_giant
                    Attributes AlwaysCrit
                    Template T_TFBot_Giant_Soldier_Spammer
                    Health 4200
                    Item "idiot box"
                    Item "steel pipes"
                    Item "shoestring budget"
                    Item "The Battalion's Backup"
                    CharacterAttributes
					{
						"increase buff duration"	9.0
						"deploy time increased"	0.5
					}
                }
                TFBot
                {
                    //Sigsegv-mod exclusive; this bot will lead grenades and aim at enemy's feet for increased accuracy
                    AimLeadProjectileSpeed 1216.6 [$SIGSEGV]
                    AimAt Feet [$SIGSEGV]
                    Template	T_TFBot_Giant_Demoman
                    Item        "The Squid's Lid"
                    Item        "Cap'n Calamari"
                    ItemAttributes
                    {
                        ItemName "TF_WEAPON_GRENADELAUNCHER"
				        "fire rate bonus" 0.5
                    }
                }
			}
        }
        WaveSpawn
        {
            Name	wave2d
            WaitForAllDead wave2c
            TotalCurrency	200
            TotalCount	50
            MaxActive	14
            SpawnCount	5
            Where	spawnbot_invasion
            WaitBeforeStarting 8
            WaitBetweenSpawns  3
            RandomChoice
            {
                TFBot
                {
                    RocketCustomParticle	flare_glow [$SIGSEGV] //Rockets will now glow like flares
                    Name   "Charged Soldier"
                    Class 	Soldier
                    Skill 	Hard
                    Attributes	AlwaysCrit
                    Attributes  HoldFireUntilFullReload
                    Item  "the original"
                    Item "The Galvanized Gibus"
                    Item "the mantreads"
                    ItemAttributes
                    {
                        ItemName "The Original"
                        "damage bonus" 1.5
                        "faster reload rate" 0.4
                        "fire rate bonus" 1.25
                        "projectile speed increased" 0.5
                    }
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    RocketCustomParticle	flare_glow [$SIGSEGV] //Sigsegv-mod exclusive;Rockets will now glow like flares
                    Name   "Charged Soldier"
                    Class 	Soldier
                    Skill 	Hard
                    Attributes	AlwaysCrit
                    Attributes  HoldFireUntilFullReload
                    Item  "the original"
                    Item "The Galvanized Gibus"
                    Item "the mantreads"
                    ItemAttributes
                    {
                        ItemName "The Original"
                        "damage bonus" 1.5
                        "faster reload rate" 0.4
                        "fire rate bonus" 1.25
                        "projectile speed increased" 0.5
                    }
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Template T_TFBot_Soldier_Burst
                    Attributes AlwaysCrit
                    Tag bot_flank
                }
            }
        }
        WaveSpawn
        {
            Name	wave2d
            WaitForAllDead wave2c
            TotalCurrency	200
            TotalCount	6
            MaxActive	4
            SpawnCount	2
            Where	spawnbot_invasion
            WaitBeforeStarting 11
            WaitBetweenSpawns  25
            Squad
            {
                TFBot
                {
                    Template T_TFBot_Giant_Heavyweapons_BrassBeast
					MaxVisionRange 1200
					Item "The Grand Duchess Tutu"
                    Item "The Grand Duchess Fairy Wings"
                    Item "The Grand Duchess Tiara"
					ItemAttributes
					{
						ItemName "The Brass Beast"
						"damage bonus"	1.7
						"spunup_damage_resistance" 0.5
					}
                }
                TFBot
                {
                    Template T_TFBot_Giant_Heavyweapons_Natascha
                    MaxVisionRange 1200
                    ItemAttributes
                    {
                        ItemName "Natascha"
                        "damage penalty" 1
                        "damage bonus"	1.25
                        "spunup_damage_resistance" 0.5
                    }
                    Item "Minsk Beef"
                    Item "Bull Locks"
                    Item "Bone-Cut Belt"
                }
            }
        }
        WaveSpawn
		{
			Name	wave2e
            WaitForAllDead wave2d
			TotalCurrency	100
			TotalCount	60
			MaxActive	12
			SpawnCount	4
			WaitBeforeStarting	5
			WaitBetweenSpawns	5
			Where   spawnbot
			TFBot
			{
                Name "Bonk Rapid Fire Scout"
                Template	T_TFBot_Scout_Bonk
                ClassIcon scout
                Skill Expert
				WeaponRestrictions PrimaryOnly
				Attributes  HoldFireUntilFullReload
				Item  "Upgradeable tf_weapon_scattergun"
				ItemAttributes
				{
					ItemName	"Upgradeable tf_weapon_scattergun"
					"fire rate bonus"	0.6
                    "faster reload rate" 0.4
				}
                CharacterAttributes
                {
                    "kill forces attacker to laugh"	1
                    "deploy time increased" 0.5
                }
			}
		}
        WaveSpawn
        {
            Name	wave2e
            WaitForAllDead wave2d
            TotalCurrency	300
            TotalCount	12
            MaxActive	8
            SpawnCount	4
            Where	spawnbot
            WaitBeforeStarting 10
            WaitBetweenSpawns 25
            Squad
            {
                FormationSize 400
                TFBot
                {
                    Template T_TFBot_Giant_Demoman_Quad
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic
                    Item "The Warsworn Helmet"
                }
                TFBot
                {
                    Class Heavyweapons
                    Skill Hard
                    Health 900
                    Scale 1.5
                    Name  "Black Market Heavy"
                    Item  "tomislav"
                    Item    "capone's capper"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Class Heavyweapons
                    Skill Hard
                    Health 900
                    Scale 1.5
                    Name  "Black Market Heavy"
                    Item  "tomislav"
                    Item    "capone's capper"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
            }
        }
        //"Wave 3"
        WaveSpawn
		{
			Name	wave3a
            WaitForAllDead wave2e
			TotalCurrency	100
			TotalCount	25
			MaxActive	8
			SpawnCount	5
			WaitBeforeStarting	8
			WaitBetweenSpawns	4
			Where   spawnbot
			RandomChoice
			{
                TFBot
                {
                    Name "Resistance Piercer Bowman"
					Template T_TFBot_Sniper_Huntsman_Spammer
					Skill  Expert
					MaxVisionRange 750
					Item "the razorback"
                    Item "the fruit shoot"
                    ItemAttributes
					{
						ItemName "the huntsman"
						"dmg pierces resists absorbs"	1
					}
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Name "Resistance Piercer Bowman"
					Template T_TFBot_Sniper_Huntsman_Spammer
					Skill  Expert
					MaxVisionRange 750
					Item "the cozy camper"
                    Item "the fruit shoot"
                    ItemAttributes
					{
						ItemName "the huntsman"
						"dmg pierces resists absorbs"	1
					}
					ItemAttributes
					{
						ItemName "the cozy camper"
						"health regen"	40
					}
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Name "Resistance Piercer Bowman"
					Template T_TFBot_Sniper_Huntsman_Spammer
					Skill  Expert
					MaxVisionRange 750
					Item "Darwin's Danger Shield"
                    Item "the fruit shoot"
                    ItemAttributes
					{
						ItemName "the huntsman"
						"dmg pierces resists absorbs"	1
					}
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
			}
		}
        WaveSpawn
		{
            Name	wave3a
            WaitForAllDead wave2e
			TotalCurrency	100
			TotalCount	5
			MaxActive	2
			SpawnCount	1
			WaitBeforeStarting	8
			WaitBetweenSpawns   8
			Where   spawnbot_side
			TFBot
			{
                Template	T_TFBot_Giant_Scout_Baseball
                Attributes AlwaysCrit
                ClassIcon scout_giant
				ItemAttributes
				{
					ItemName    "the sandman"
					"effect bar recharge rate increased"    0.05
					"dmg penalty vs players"	2	// 30 damage balls
				    "damage bonus"	0.34 //deals regular melee damage (34)
				}
			}
		}
        WaveSpawn //Ghost Tank
		{
			Name	wave3a
            WaitForAllDead wave2e
			TotalCount 1
			SpawnCount 1
			WaitBeforeStarting 10
			TotalCurrency 200
			Tank
			{
				Health 35000
				Name tankboss_ghost
				Speed 75
				StartingPathTrackNode tank_path_ghost
				OnKilledOutput
				{
					Target boss_dead_relay_ghost
					Action Trigger
				}
				OnBombDroppedOutput
				{
					Target boss_deploy_relay
					Action Trigger
				}
			}
		}
        WaveSpawn
		{
            Name	wave3support
            WaitForAllDead wave3a
			TotalCurrency	100
			TotalCount	5
			MaxActive	1
			SpawnCount	1
			WaitBeforeStarting	20
			WaitBetweenSpawnsAfterDeath   30
			Where   spawnbot_flank
			TFBot
			{
                Template	T_TFBot_Giant_Scout_Baseball
                Attributes AlwaysCrit
                ClassIcon scout_giant
				ItemAttributes
				{
					ItemName    "the sandman"
					"effect bar recharge rate increased"    0.05
					"dmg penalty vs players"	2	// 30 damage balls
				    "damage bonus"	0.34 //deals regular melee damage (34)
				}
			}
		}
        WaveSpawn
		{
            Name	wave3b
            WaitForAllDead wave3a
			TotalCurrency	100
			TotalCount	48
			MaxActive	12
			SpawnCount	12
			WaitBeforeStarting	5
			WaitBetweenSpawns   8
			Where   spawnbot_side
            Where   spawnbot_flank
			RandomChoice
			{
                TFBot
                {
                    Name "Deflector Heavy"
                    Class Heavyweapons
                    Skill Hard
                    Attributes AlwaysCrit
                    ItemAttributes
					{
						ItemName	"deflector"
						"attack projectiles"	1
					}
					Item	"deflector"
					Item	"the u-clank-a"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Name "Deflector Heavy"
                    Class Heavyweapons
                    Skill Hard
                    Attributes AlwaysCrit
                    ItemAttributes
					{
						ItemName	"deflector"
						"attack projectiles"	1
					}
					Item	"deflector"
					Item	"the u-clank-a"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
                TFBot
                {
                    Name "Heavy"
                    Class Heavyweapons
                    Skill Hard
                    Item "Natascha"
                    Item "The Galvanized Gibus"
                    CharacterAttributes
                    {
                        "kill forces attacker to laugh"	1
                    }
                }
			}
		}
        WaveSpawn
        {
            Name	wave3b
            WaitForAllDead wave3a
            TotalCurrency	300
            TotalCount	6
            MaxActive	3
            SpawnCount	3
            Where	spawnbot
            WaitBetweenSpawns 30
            Squad
            {
                TFBot
                {
                    Template T_TFBot_Giant_Pyro_Fury
                }
                TFBot
                {
                    Template T_TFBot_Giant_Pyro_Fury
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic
                    Item "The Warsworn Helmet"
                }
            }
        }
        WaveSpawn
        {
            Name	wave3c
            WaitForAllDead wave3b
            TotalCurrency	150
            TotalCount	50
            MaxActive	10
            SpawnCount	1
            Where	spawnbot_invasion
            WaitBeforeStarting 3
            WaitBetweenSpawns  1
            RandomChoice
            {
                TFBot
                {
                   Template T_TFBot_Pyro_Conch
                }
                TFBot
                {
                   Template T_TFBot_Pyro_Conch
                }
                TFBot
                {
                   Template T_TFBot_Pyro_Gas
                }
            }
        }
        WaveSpawn //Void Ghost Tank
		{
			Name	wave3c1
            WaitForAllDead wave3b
			TotalCount 1
			SpawnCount 1
			WaitBeforeStarting 10
			TotalCurrency 125
			Tank
			{
				Health 27500
				Name tankboss_voidghost
				Speed 75
				StartingPathTrackNode tank_path_voidghost_start
				OnKilledOutput
				{
					Target boss_dead_relay_voidghost
					Action Trigger
				}
				OnBombDroppedOutput
				{
					Target boss_deploy_relay
					Action Trigger
				}
			}
		}
        WaveSpawn //Final Void Tank
		{
			Name	wave3c2
            WaitForAllDead wave3b
			TotalCount 1
			SpawnCount 1
			WaitBeforeStarting 20
			TotalCurrency 125
			Tank
			{
				Health 27500
				Name tankboss_underworld
				Speed 75
                Skin 1
				StartingPathTrackNode tank_path_bridge1
				OnKilledOutput
				{
					Target boss_dead_relay_underworld
					Action Trigger
				}
				OnBombDroppedOutput
				{
					Target boss_deploy_relay
					Action Trigger
				}
			}
		}
        WaveSpawn
		{
            Name	wave3d
            WaitForAllDead wave3c1
			TotalCurrency	50
			TotalCount	10
			MaxActive	10
			SpawnCount	2
			WaitBetweenSpawns   2
			Where	spawnbot_side
			Squad
			{
				TFBot
				{
                    Template T_TFBot_Engineer_Sentry_Battle
					Item  "the eureka effect"
					Attributes AlwaysCrit
                    Attributes IgnoreFlag
					CharacterAttributes
					{
						"kill forces attacker to laugh"	1
					}
				}
				TFBot
				{
					Template	T_TFBot_Pyro_Conch
				}
			}
		}
        WaveSpawn
		{
            Name	wave3d
            WaitForAllDead wave3c2
			TotalCurrency	50
			TotalCount	10
			MaxActive	10
			SpawnCount	2
			WaitBetweenSpawns   2
			Where	spawnbot_flank
			Squad
			{
				TFBot
				{
					Template T_TFBot_Engineer_Sentry_Battle
					Item  "the eureka effect"
					Attributes AlwaysCrit
                    Attributes IgnoreFlag
					CharacterAttributes
					{
						"kill forces attacker to laugh"	1
					}
				}
				TFBot
				{
					Template	T_TFBot_Pyro_Conch
				}
			}
		}
        WaveSpawn
        {
            Name	wave3d1
            WaitForAllDead wave3c2
            TotalCurrency	34
            TotalCount	2
            MaxActive	2
            SpawnCount	2
            Where	spawnbot
            WaitBeforeStarting 25
            Squad
			{
                FormationSize 100
                TFBot
                {
                    Template	T_TFBot_Giant_Heavyweapons_Haste
                }
				TFBot
                {
                    Template    T_TFBot_Medic_Shield
                }
			}
        }
        WaveSpawn
        {
            Name	wave3d1
            WaitForAllDead wave3c2
            TotalCurrency	33
            TotalCount	2
            MaxActive	2
            SpawnCount	2
            Where	spawnbot_side
            WaitBeforeStarting 25
            Squad
			{
                FormationSize 100
                TFBot
                {
                    Template	T_TFBot_Giant_Heavyweapons_Haste
                }
				TFBot
                {
                    Template    T_TFBot_Medic_Shield
                }
			}
        }
        WaveSpawn
        {
            Name	wave3d1
            WaitForAllDead wave3c2
            TotalCurrency	33
            TotalCount	2
            MaxActive	2
            SpawnCount	2
            Where	spawnbot_flank
            WaitBeforeStarting 25
            Squad
			{
                FormationSize 100
                TFBot
                {
                    Template	T_TFBot_Giant_Heavyweapons_Haste
                }
				TFBot
                {
                    Template    T_TFBot_Medic_Shield
                }
			}
        }
        WaveSpawn
        {
            Name	wave3d2
            WaitForAllDead wave3d1
            TotalCurrency	250
            TotalCount	6
            MaxActive	3
            SpawnCount	3
            Where	spawnbot
            WaitBetweenSpawns 30
            Squad
            {
                TFBot
                {
                    Template T_TFBot_Giant_Soldier_Burst_Pocket
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic_Regen
                    Name "Giant Regen Medic"
                }
                TFBot
                {
                    Template T_TFBot_Giant_Medic_Regen
                    Name "Giant Regen Medic"
                }
            }
        }
        WaveSpawn
		{
            Name	wave3d2
            WaitForAllDead wave3d1
			TotalCurrency	50
			TotalCount	20
			MaxActive	8
			SpawnCount	1
			Where   spawnbot
            Where   spawnbot_side
            WaitBetweenSpawns     1
			TFBot
            {
                Template	T_TFBot_Scout_Shortstop
                Skill Hard
                Name "Special Delivery Scout"
                Attributes AlwaysFireWeapon
                 WeaponRestrictions SecondaryOnly
                ClassIcon scout
                Item	"mad milk"
                Item    "the milkman"
                Item    "the holy mackerel"
                ItemAttributes
                {
                    ItemName	"mad milk"
                    "effect bar recharge rate increased"	0.2
                }
                CharacterAttributes
                {
                    "deploy time increased" 0
                    "kill forces attacker to laugh"	1
                }
            }
		}
        //Final Bosses
        WaveSpawn
        {
            Name	wave3e
            WaitForAllDead wave3d2
            TotalCurrency	100
            TotalCount	2
            MaxActive	2
            SpawnCount	2
            Where	spawnbot_chief
            WaitBeforeStarting   5
            FirstSpawnWarningSound "ui/halloween_boss_summoned.wav"
			DoneWarningSound "ui/halloween_boss_defeated.wav"
            Squad
            {
                TFBot
                {
                    Template T_TFBot_Chief_Heavy_Rotten
                }
                TFBot
                {
                    Template T_TFBot_Chief_Pyro_Rotten
                }
            }
        }
        //Support Robots
        WaveSpawn
		{
            Name  wavesupport
			TotalCurrency	100
			TotalCount	10
			MaxActive	1
			SpawnCount	1
			WaitBeforeStarting	90
			WaitBetweenSpawnsAfterDeath	12
			Where   spawnbot
            Support 1
			TFBot
			{
                Name "Unholy Mackerel"
                Template	T_TFBot_Scout_Fish
                ClassIcon scout_bat
                Skill Expert
                Attributes AlwaysCrit
                Item "the milkman"
                CharacterAttributes
                {
                    "kill forces attacker to laugh"	1
                }
			}
		}
        WaveSpawn
		{
            Name  wave3esupport
            WaitForAllDead wave3d2
			TotalCurrency	0
			TotalCount	100
			MaxActive	10
			SpawnCount	1
			WaitBeforeStarting	10
			WaitBetweenSpawns   1
			Where   spawnbot_invasion
            Support 1
			TFBot
			{
                ClassIcon scout_fan
                Class Scout
                Skill Expert
                Item "The Force-a-Nature"
                Item "The Bolt Boy"
			    Item "The Force-a-Nature"
                Attributes AlwaysCrit
                MaxVisionRange 750
                CharacterAttributes
                {
                    "kill forces attacker to laugh"	1
                    "rage giving scale"	0.5
                }
			}
		}
    }
}
